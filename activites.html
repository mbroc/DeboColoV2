<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Activités à venir</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #f7f9fc;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  .activity {
    background: #fff;
    border-left: 6px solid #4CAF50;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin: 20px auto;
    max-width: 600px;
    padding: 15px 20px;
    border-radius: 8px;
  }
  .activity:nth-child(even) {
    border-left-color: #2196F3;
  }
  .activity p {
    margin: 6px 0;
    color: #555;
  }
  .highlight {
    font-weight: bold;
    color: #222;
  }
</style>
</head>
<body>

<h1>Activités à venir</h1>

<div id="activities"></div>

<script>
// ⚠️ Remplace par l’ID de ton Google Sheet
const sheetID = "1cLlpmX1vZTMyD7ED1AxMAs7tFGn8P7N5dqVbGSUUtl4";

// URL publique d'export CSV (on lit en CSV pour plus de compatibilité)
const url = 'https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:csv';

fetch(url)
  .then(response => response.text())
  .then(csvText => {
    const rows = csvText.split("\n").slice(1); // on saute la première ligne (headers)
    const container = document.getElementById("activities");
    rows.forEach(row => {
      const cols = row.split(",");
      //if (cols.length < 6) return; // ignore lignes incomplètes //Non, pas pour l'instant
      const date = cols[1].trim(); // index start à 1 car index 0 = ID
      const name = cols[2].trim();
      const desc = cols[3].trim();
      const budget = cols[4].trim();
      const maxP = cols[5].trim();
      const currentP = cols[6].trim();

      /*const html = '
      <div class="activity">
        <p><span class="highlight">Date :</span> ${date}</p>
        <p><span class="highlight">Activité :</span> ${name}</p>
        <p><span class="highlight">Description :</span> ${desc}</p>
        <p><span class="highlight">Budget estimé :</span> ${budget} €</p>
        <p><span class="highlight">Jusqu'à</span> ${maxP} participants</p>
        <p><span class="highlight">Déjà inscrits :</span> ${currentP}</p>
      </div>';*/
      container.insertAdjacentHTML("beforeend", html);
    });
  })
  .catch(error => {
    document.getElementById("activities").innerHTML =
      "<p>Erreur lors du chargement des activités.</p>";
    console.error(error);
  });
</script>

</body>
</html>
